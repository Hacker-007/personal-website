---
import { renderHighlightedCode } from '../utils/shiki'

import Layout from '../layouts/Layout.astro'

import Link from '../components/Link.astro'
import { RedisTerminal } from '../components/RedisTerminal'
import { EnviousEditor } from '../components/EnviousEditor'
import InteractiveProject from '../components/InteractiveProject.astro'

const defaultCode = `fn fibonacci(n: Int) -> Int {
  if n <= 1 {
    return n
  }

  let a = fibonacci(n - 1)
  let b = fibonacci(n - 2)
  return a + b
}

let result = fibonacci(10)
print(result)`

const renderedCode = await renderHighlightedCode(defaultCode)
---

<Layout>
  <div class="mx-auto max-w-6xl px-6 py-8">
    <header class="flex items-start justify-between">
      <section>
        <h1 class="text-lg font-semibold tracking-tight">Revanth Pothukuchi</h1>
        <p class="text-muted">MIT '25, CS</p>
        <div class="mt-2 flex gap-4">
          <Link
            aria-label="LinkedIn"
            href="https://www.linkedin.com/in/revanthpothukuchi"
            rel="external noopener noreferrer"
            target="_blank"
          >
            linkedin
          </Link>
          <Link
            aria-label="GitHub"
            href="https://www.github.com/Hacker-007"
            rel="external noopener noreferrer"
            target="_blank"
          >
            github
          </Link>
          <Link
            aria-label="email"
            href="mailto:revanthpothukuchi123@gmail.com"
            rel="external noopener noreferrer"
            target="_blank"
          >
            email
          </Link>
          <Link aria-label="resume" href="/assets/resume.pdf" download="Revanth Pothukuchi Resume">
            resume
          </Link>
        </div>
      </section>
      <nav class="flex items-center gap-4">
        <Link aria-label="personal projects" href="/projects">projects</Link>
        <Link aria-label="blog" href="/blog">blog</Link>
      </nav>
    </header>

    <main class="mt-12 max-w-2xl">
      <h2 class="text-muted leading-relaxed">
        Member of Technical Staff at Nexus. Previously, an algorithmic
        quantitative intern at Citi, technical co-founder of a startup, and
        security researcher at MIT CSAIL.
      </h2>
    </main>

    <section class="mt-20 flex items-start justify-between gap-10">
      <div class="flex-1">
        <InteractiveProject
          id="redis"
          ariaLabel="redis server project"
          title="Redis Server"
          description="A partial implementation of an asynchronous, multi-threaded, and multiplexed Redis server."
        >
          <RedisTerminal client:load />
        </InteractiveProject>
      </div>
      <div class="flex-1">
        <InteractiveProject
          id="envious"
          ariaLabel="envious compiler project"
          title="Envious"
          description="An AOT compiler for a custom language with a LLVM backend and Hindley-Milner type inference."
        >
          <EnviousEditor
            client:load
            defaultCode={defaultCode}
            renderedDefaultCode={renderedCode}
          />
        </InteractiveProject>
      </div>
    </section>
  </div>
</Layout>
